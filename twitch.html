<!DOCTYPE html>
<body style="font-size:1.5em">

<div style="display: flex;justify-content:center;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto">
    <div style="padding-top:20%;width:66%;text-align:center;font-family:'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif">

        <h1>Enter Channel Below:</h1><br>
        <input name="channel" placeholder="e.g. misterrogers" size="35" onkeypress="return checkIfEnterPressed(event);" id="channel" style="width:75%;font-size:1em;border: none;border-bottom: solid 1px #333" type="text"> <button type="button" onclick="loadChannel()" id="button">Go</button>
    </div>
</div>




<script>
//Load Channel
function loadChannel(channel) {
    if (!channel) channel = document.getElementById('channel').value;
    if (!channel) channel = "misterrogers";
    document.write(`<style>
    iframe { margin:0; padding:0; display: inline-block; }
    body { margin:0; padding:0; }
</style>


<iframe
    src="http://player.twitch.tv/?channel=` + channel + `"
    height=100%
    width=78%
    frameborder=0
    scrolling=0
    allowfullscreen=1 >
</iframe><iframe
    src="http://www.twitch.tv/`+ channel + `/chat"
    frameborder=0
    scrolling=0
    height=100%
    width=22% >
</iframe>`)
}
//Load channel from GET value
function getQueryVariable(variable)
{
    var query = window.location.search.substring(1);
    var vars = query.split("&");
    for (var i=0;i<vars.length;i++) {
        var pair = vars[i].split("=");
        if(pair[0] == variable){return pair[1];}
    }
    return(false);
}
channel = getQueryVariable("channel");
if (channel) {
    loadChannel(channel);
}
</script>

<script>
//Allow ENTER keypress
function checkIfEnterPressed(e) {
    // look for window.event in case event isn't passed in
    e = e || window.event;
    if (e.keyCode == 13)
    {
        document.getElementById('button').click();
        return false;
    }
    return true;
}
</script>
    
</body>
